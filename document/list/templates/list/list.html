{% extends 'list/base.html' %}
{% block body %}
    <style>
        body{
            background-color: rgb(236,248,236);

            }
    </style>

<form class = "input" method="get" >

    <select name="tieude">
        <option value="tatca">Tìm theo tất cả</option>
        <option value="hoten">Tìm theo họ tên</option>
        <option value="detai">Tìm theo đề tài</option>
        <option value="masv">Tìm theo Mã sv</option>
    </select>
    <input type="text" name="q" id="id_q" value="{{ query }}" placeholder="Tìm kiếm">
    <button class="btn btn-primary btn-sm" type="submit">Tìm</button>

</form>

<br>
 <a href="{% url 'kltn' %}{% if request.GET.q %}?q={{ request.GET.q }}&tieude={{ request.GET.tieude }}{% endif %}" class="btn btn-primary btn-sm" role="button" aria-pressed="true" > Sinh Viên Làm Khóa Luận Tốt Nghiệp</a>
 <a href="{% url 'nckh' %}{% if request.GET.q %}?q={{ request.GET.q }}&tieude={{ request.GET.tieude }}{% endif %}" class="btn btn-primary btn-sm" role="button" aria-pressed="true" > Sinh Viên Làm Nghiên Cứu Khoa Học</a>
<br>
    <br>
<table id="dtBasicExample" class="table table-striped table-bordered table-sm" cellspacing="0" width="100%">
    <thead>
      <tr>
        <th>STT</th>
        <th>Họ và Tên</th>
        <th style="display:none;">Tên</th>
        <th>Đề tài</th>
        <th>Loại</th>
        <th>Cán bộ hướng dẫn</th>
        <th>Phản biện</th>
        <th></th>
        <th></th>
        <th></th>
      </tr>
    </thead>
    <tbody>
        <tr>
     {% for student in students %}

           <td>{{ student.id }}</td>
           <td>{{ student.name }} </td>
           <td style="display:none;">{{ student.last_name }} </td>
           <td>{{ student.topic }}</td>
           <td>{{student.topic_type}}</td>
           <td>{{ student.tutor }}</td>
           <td>{{ student.reviewer }}</td>
           <td>
               {% if user.is_staff %}
               <a href="{% url 'edit_info' student.pk %}" class="btn btn-primary btn-sm" role="button" aria-pressed="true" > Edit</a>
               {% endif %}
           </td>
           <td>
               {% if user.is_staff %}
             <a href="{% url 'delete_student' student.pk %}" class="btn btn-primary btn-sm" role="button" aria-pressed="true" > Delete</a>
               {% endif %}
           </td>
           <td>
              {% if student.file %}
               <a href="{{ student.file.url }}" class="btn btn-primary btn-sm" target="_blank">
                View</a>
           {% endif %}
           </td>
         </tr>

     {% endfor %}
    </tbody>
  </table>



{% load static %}
<script type="text/javascript" src="{% static 'js/jquery-3.3.1.min.js' %}"></script>
<script type="text/javascript" src="{% static 'js/addons/datatables.js' %}"></script>
<script type="text/javascript" src="{% static 'js/addons/datatables.min.js' %}"></script>
<script type="text/javascript" src="https://cdn.datatables.net/fixedheader/3.1.5/js/dataTables.fixedHeader.min.js"></script>
<script type="text/javascript" src="{% static 'js/popper.min.js' %}"></script>
<script type="text/javascript" src="{% static 'js/bootstrap.min.js' %}"></script>
<script type="text/javascript" src="{% static 'js/mdb.min.js' %}"></script>


<script>
  $(document).ready(function () {
  $('#dtBasicExample').DataTable(
    {
      "paging": true,
      "pageLength": 20,
      "searching": false,
      "info": false,
      "lengthChange": false,
      "columnDefs": [
        { "orderData": [ 2, 1 ], "targets": 1 }
      ],
    }
  );
  $('.dataTables_length').addClass('bs-select');
  });
</script>

{% endblock %}
